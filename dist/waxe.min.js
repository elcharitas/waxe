(function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Wax=e()})(function(){return function r(i,o,u){function c(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);throw(n=Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return c(i[t][1][e]||e)},n,n.exports,r,i,o,u)}return o[t].exports}for(var a="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={strip:!(n.WaxTemplate=n.WaxDelimiter=n.WaxConfig=void 0),throwUndefined:!1,autoescape:!0,context:{now:Date.now()}};n.WaxConfig=r;n.WaxDelimiter={blockSyntax:"@([_\\w]+)(\\(([^@]+)\\))*",tagName:1,argList:2,endPrefix:"end"};n.WaxTemplate=function(e){return void 0===e&&(e={}),null}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bind=n.namefn=void 0;var i=e("../blob");n.namefn=function(e,t){var n=Function("return function (call) { return function "+e+" () { return call(this, arguments) }; };")()(Function.apply.bind(t));return n.source=t.source.replace("anonymous",e),n},n.bind=function(e,t){var n,r=i.WaxTemplate;try{(r=(n=Function("out, scope","out+="+t+";return out")).bind(e.core.configs.context,"")).source=n.toString()}catch(e){}return r}},{"../blob":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mkConfig=void 0;var o=e("../blob");n.mkConfig=function(e,t){var n,r,i=o.WaxConfig;for(n in i.delimiter=o.WaxDelimiter,t)i.delimiter[n]=t[n];for(r in e)i[r]=e[r];return i}},{"../blob":1}],4:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.genTemplate=n.transpile=void 0;var i=e("./binder"),o=e("./traverse"),u=e("../blob"),c=r(e("./walker"));n.transpile=function(e,t){return e=o.traverse(e,t.delimiter),e=new c.default(e).walk(this),!0===t.strip&&(e=e.replace(/\\n\s+/g,"")),i.bind(this,e)},n.genTemplate=function(e,t){return void 0===e&&(e=u.WaxTemplate),void 0===t&&(t="waxe-"+Date.now()),i.namefn(t,e)}},{"../blob":1,"./binder":2,"./traverse":5,"./walker":6}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.traverse=void 0,n.traverse=function(e,t){var n=t.argList,r=t.blockSyntax,i=t.tagName,o=t.endPrefix,t=JSON.stringify(e),e="("+r+")",e=t.match(RegExp(e,"g"));return{text:t,directives:e,argList:n,blockSyntax:r,tagName:i,endPrefix:o}}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../debug"),e=(i.prototype.walk=function(o,u){var e,c=this;return void 0===u&&(u=this.text),null!==(e=this.directives)&&void 0!==e&&e.forEach(function(e,t){var n=e.match(c.blockSyntax),r=n[c.tagName],i=n[c.argList],n="",i=(i=void 0===i?"":i).replace("$","(scope||this).");(t=o.getTag({tag:r,argLiteral:i,block:e,position:t}))?(t.source=JSON.parse(c.text),n=t.descriptor.call(t,c.toArgs(i))):~["for","if","while","switch"].indexOf(r)?n=r+i+"{":r.indexOf(c.endPrefix)||(n="}"),u=u.replace(e,'";'+n+'\nout+="')}),u},i.prototype.toArgs=function(e){var t=new String(e);return t.arg=function(e){return"["+t.text()+"]["+e+"]"},t.text=function(){return t.replace(/^\(([\s\S]*)\)$/,"$1")},t},i);function i(e){if(void 0===e&&(e={}),"object"!=typeof this)throw r.dbg(i,this);this.directives=e.directives,this.argList=e.argList,this.blockSyntax=e.blockSyntax,this.tagName=e.tagName,this.text=e.text,this.endPrefix=e.endPrefix}n.default=e},{"../debug":7}],7:[function(t,e,n){(function(c){(function(){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.dbg=n.formatDbg=void 0;var o=e(t("./messages.json"));function u(e,t){if(o.hasOwnProperty(e)){var n=t.length-1,n=o[e][n],r=void 0===n?"":n;return t.forEach(function(e,t){r=r.replace("%"+(t+1),null==e?void 0:e.toString())}),r}}n.formatDbg=u,n.dbg=function(e,t){var n,r=[];return"object"==typeof e&&(!t||e instanceof t||(n="TypeError",r.push(e,t))),typeof e!=typeof t&&(n="TypeError",r.push(e.name||e,t?typeof e:"class",t?"declared":"initialized")),n?new(void 0!==c?c:window)[n](u(n,r)):null}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./messages.json":8}],8:[function(e,t,n){t.exports={TypeError:[null,"%1 should be of %2's type","%1 should be %3 as a %2"]}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CoreDirectives=void 0;var r=(i.prototype.elseif=function(e){return"} else if("+e+") {"},i.prototype.else=function(){return"} else {"},i.prototype.switch=function(e){return"switch"+e+"{/*"},i.prototype.case=function(e){return"*/case "+e+":"},i.prototype.break=function(){return"break;/*"},i.prototype.endswitch=function(){return"*/}"},i.prototype.define=function(e){return"scope["+e.arg(0)+"] = "+e.arg(1)},i.prototype.yield=function(e){return"out+="+e.arg(0)},i.prototype.bind=function(e){var t=e.arg(1),e=e.arg(0);return'out+=this["bind'+e+'"]='+t+";setInterval(function(){\n            document.querySelectorAll("+e+').forEach(function(hook){\n                if(this["bind'+e+'"] !== '+t+'){\n                    hook.value = this["bind'+e+'"] = '+t+"\n                }\n            })\n        })"},i.prototype.comment=function(e){return"/*"+e.arg(0)+"*/"},i);function i(){}n.CoreDirectives=r},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CoreWax=void 0;var r=e("./directives"),e=function(e){this.directives=new r.CoreDirectives};n.CoreWax=e},{"./directives":9}],11:[function(e,t,n){"use strict";var r=e("./debug"),i=e("./compiler/core"),o=e("./compiler/parser"),u=e("./blob"),c=e("./plugins/core");function a(){if("object"!=typeof this)throw r.dbg("Wax",this);this.configs=u.WaxConfig,this.delimiter=u.WaxDelimiter,this.tags={},this.plugins={},this.templates={}}t.exports=(a.setDelimiter=function(e){return a.core.delimiter=e},a.getDelimiter=function(){return a.core.delimiter},a.getConfigs=function(){return a.core.configs},a.template=function(e,t,n){if(void 0===n&&(n=this.getConfigs()),"string"==typeof t)return this.core.templates[e]=o.genTemplate(o.transpile.call(a,t,i.mkConfig(n,a.getDelimiter())),e);throw r.dbg("text",t)},a.parseEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!0),"undefined"!=typeof document&&document.querySelectorAll(e).forEach(function(e){e.innerHTML=e.value=a.template(e.id,e.value||e.innerHTML)(t),"hidden"in e&&(e.hidden=!n)})},a.directive=function(e,t){return this.core.tags[e]={tag:e,descriptor:t}},a.global=function(e,t){return void 0===t&&(t=null),this.core.configs.context[e]=t},a.getTag=function(e){var t=this.core.tags[e.tag];if("object"==typeof t){for(var n in e)t[n]=e[n];return t}},a.addPlugin=function(e){var t,e=new e(this).directives,n=void 0===e?{}:e;for(t in n)this.directive(t,n[t])},Object.defineProperty(a,"core",{get:function(){return this._core instanceof a||(this._core=new a,a.addPlugin(c.CoreWax)),this._core},enumerable:!1,configurable:!0}),a)},{"./blob":1,"./compiler/core":3,"./compiler/parser":4,"./debug":7,"./plugins/core":10}]},{},[11])(11)});