(function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Wax=e()})(function(){return function n(i,o,u){function a(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,o,u)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,t,r){"use strict";function n(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};return"string"==typeof e?e.replace(/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return t[e]||e}):e}function i(t,e){void 0===e&&(e=Object.keys(t));var r={writable:!1,configurable:!1};e.forEach(function(e){Object.defineProperty(t,e,r)})}Object.defineProperty(r,"__esModule",{value:!0}),r.conflictProp=r.encodeHTML=r.WaxDelimiter=r.WaxTemplate=r.WaxConfig=void 0,r.encodeHTML=n,r.conflictProp=i;var o={blockSyntax:"@(\\w+)(\\([^@]+\\))?",tagName:1,argList:2,endPrefix:"end"},o={strip:!0,throwUndefined:!(r.WaxTemplate=function(e){return void 0===e&&(e={}),null}),autoescape:!0,delimiter:r.WaxDelimiter=o,context:{startTime:Date.now(),now:function(){return Date.now()},escape:function(e,t){return void 0===t&&(t=!1),e=n(e),!0===t&&(e=(escape||String)(e)),e},merge:function(e){var r=this;void 0===e&&(e=[]),(e=[].slice.call(e)).forEach(function(e){for(var t in e)r[t]=e[t]})},reverse:function(e,t){return void 0===t&&(t=""),e.split(t).reverse().join(t)}}};i((r.WaxConfig=o).context)},{}],2:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.parseTemplate=r.parseString=r.traverseNode=void 0;var c=e("."),s=n(e("./walker"));function i(e,t,r){var n,i,o,u,a,t=(n=t,i=r.delimiter,o=i.argList,u=i.blockSyntax,a=i.tagName,t=i.endPrefix,i=JSON.stringify(n),n=i.match(RegExp("("+u+")","g")),{text:i,directives:n,argList:o,blockSyntax:u,tagName:a,endPrefix:t}),t=new s.default(e,t).walk();return!0===r.strip&&(t=t.replace(/\\n\s+/g,"")),function(e){var t=c.WaxTemplate;try{t=Function("out","this.merge(arguments);out+="+e+";return out")}catch(e){}return t}(t)}r.traverseNode=function(e,t){var r=t.tag,n=t.argLiteral,i="",o=null;return(o=e.parser.getTag(t))?i=o.descriptor.call(o,n):~e.jsTags.indexOf(r)?i=r+n.parse()+"{":e.isBlockEnd(r)&&(i="}"),i},r.parseString=function(e){var n=e.split(""),i=null;return n.forEach(function(e,t){var r;e==i||'"'!=i&&"'"!=i?i==e?i=null:i||"$"!=e?i||";"!=e||(r=n[t-3]+n[t-2]+n[t-1]).match(/^&(g|l)t$/)&&(n[t-1]=n[t-2]=n[t-3]="",e=r.replace("&gt",">").replace("&lt","<")):e="this.":i=e,n[t]=e}),n.join("")},r.parseTemplate=function(e,t,r){return void 0===e&&(e="waxe-"+Date.now()),void 0===t&&(t=""),void 0===r&&(r=null),e=e,t=i(r,t,r.getConfigs()),r=r,Function("call","return function "+e+"(){return call(this,arguments)}")(Function.apply.bind(t.bind(r.getConfigs().context,"")))}},{".":1,"./walker":3}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../debug"),c=e("./parser"),e=(i.prototype.walk=function(u){var e,a=this;return void 0===u&&(u=this.text),null!==(e=this.directives)&&void 0!==e&&e.forEach(function(e,t){var r=JSON.parse('"'+e+'"'),n=r.match(a.blockSyntax),i=n[a.tagName],o=n[a.argList],n=void 0===o?"":o,o=a.parser.getConfigs(),n=a.toArgs(n);u=u.replace(e,'";'+c.traverseNode(a,{tag:i,argLiteral:n,block:r,position:t,configs:o,context:o.context})+'\nout+="')}),u},i.prototype.isBlockEnd=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=e.replace(this.endPrefix,"")),0==e.indexOf(this.endPrefix)&&(!!~this.jsTags.indexOf(t)||null!==this.parser.getTag({tag:t}))},i.prototype.toArgs=function(e){var t=new String(e);return t.arg=function(e){return"["+t.text()+"]["+e+"]"},t.parse=function(){return c.parseString(t)},t.text=function(){return t.parse().replace(/^\(([\s\S]*)\)$/,"$1")},t},i);function i(e,t){void 0===t&&(t={}),n.dbg("Walker",this),this.directives=t.directives,this.argList=t.argList,this.blockSyntax=t.blockSyntax,this.tagName=t.tagName,this.text=t.text,this.endPrefix=t.endPrefix,this.jsTags=["for","if","while","switch"],this.parser=e}r.default=e},{"../debug":4,"./parser":2}],4:[function(r,e,f){(function(t){(function(){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(f,"__esModule",{value:!0}),f.dbg=f.formatDbg=f.dbgType=f.debugProp=f.debugkit=void 0;var o=e(r("./list.json"));function a(e,t){return{}.hasOwnProperty.call(e,t)}function c(e,t,r){return typeof t!=typeof r&&e.push(typeof r),void 0===t&&"object"==typeof r?e.push("initialized"):"object"!=typeof r&&e.push("declared"),e}function s(e,t){if(a(o,e)){var r=t.length-2,r=o[e][r],n=void 0===r?"":r;return t.forEach(function(e,t){n=n.replace("%"+(t+1),null==e?void 0:e.toString())}),n}}f.debugkit=void 0!==t?t:window,f.debugProp=a,f.dbgType=c,f.formatDbg=s,f.dbg=function(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n="Type");var i=[],o=null==e?void 0:e.toString(),u=null;if(n+="Error",a(f.debugkit,n)&&(i=c([e],t,r),u=f.debugkit[n],o=s(n,i)),1<i.length&&null!==u)throw new u(o)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./list.json":5}],5:[function(e,t,r){t.exports={TypeError:["%1 should be of %2's type","%1 should be %3 as a %2"]}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CoreDirectives=void 0;var n=(i.prototype.set=function(e){return"eval("+e.arg(0)+'+"="+'+JSON.stringify(e.arg(1))+");"},i.prototype.define=function(e){return"this["+e.arg(0)+"] = "+e.arg(1)+";"},i.prototype.macro=function(e){return"this["+e.arg(0)+"] = function(){var name = "+e.arg(0)+'; var call = this[name]; var args=[].slice.call(arguments);var out = "";'},i.prototype.endmacro=function(){return"return out;}"},i.prototype.include=function(e){return"out+=Wax.template("+e.arg(0)+")("+e.arg(1)+",this);"},i.prototype.yield=function(e){return"out+=("+this.configs.autoescape+" ? this.escape: String)("+(e.arg(0)||e.arg(1))+");"},i.prototype.elseif=function(e){return"} else if("+e+") {"},i.prototype.else=function(){return"} else {"},i.prototype.switch=function(e){return"switch"+e+"{/*"},i.prototype.case=function(e){return"*/case "+e+":"},i.prototype.break=function(e){return"break;/*"},i.prototype.continue=function(e){return"continue;"},i.prototype.endswitch=function(){return"*/}"},i.prototype.forelse=function(e){return"var loopObj = "+e.text().split(/\s+/)[2]+";for"+e+"{"},i.prototype.empty=function(){return'} if(typeof loopObj !== "object" || Object.keys(loopObj).length < 1){'},i.prototype.endforelse=function(){return"};delete loopObj;"},i);function i(){}r.CoreDirectives=n},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CoreWax=void 0;var n=e("./core"),i=e("./misc"),e=function(e){this.directives=new(n.CoreDirectives.bind(new i.MiscDirectives))};r.CoreWax=e},{"./core":6,"./misc":8}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MiscDirectives=void 0;var n=(i.prototype.includeIf=function(e){return"out+=(Wax.template("+e.arg(0)+")||new Function(\"return ''\"))("+e.arg(1)+",this);"},i.prototype.includeWhen=function(e){return"out+="+e.arg(0)+"?Wax.template("+e.arg(1)+")("+e.arg(2)+',this):"";'},i.prototype.bind=function(e){var t=e.arg(1),e=e.arg(0);return'out+=this["bind'+e+'"]='+t+";setInterval(function(){\n            document.querySelectorAll("+e+').forEach(function(hook){\n                if(this["bind'+e+'"] !== '+t+'){\n                    hook.value = this["bind'+e+'"] = '+t+"\n                }\n            })\n        });"},i.prototype.escape=function(e){return"out+=this.escape("+(e.arg(0)||e.arg(1))+");"},i.prototype.json=function(e){return"out+=JSON.stringify"+e},i.prototype.js=function(){return"var holdjs = out;"},i.prototype.endjs=function(){return'holdjs=this.reverse(out).replace(this.reverse(holdjs), "");out=this.reverse(this.reverse(out).replace(holdjs, ""));(new Function(this.reverse(holdjs))).bind(this)();delete holdjs'},i.prototype.comment=function(e){return"/*"+e+"*/"},i);function i(){}r.MiscDirectives=n},{}],9:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])!{}.hasOwnProperty.call(t,i)||(e[i]=t[i]);return e}).apply(this,arguments)},i=e("./debug"),o=e("./compiler"),u=e("./compiler/parser"),a=e("./plugins");function c(){i.dbg("Wax",this),this.configs=o.WaxConfig,this.tags={},this.plugins={},this.templates={}}t.exports=(c.global=function(e,t){return void 0===t&&(t=null),this.core.configs.context[e]=t},c.directive=function(e,t){return this.core.tags[e]={tag:e,descriptor:t}},c.setDelimiter=function(e){return c.core.configs.delimiter=n(n({},c.getDelimiter()),e)},c.getConfigs=function(){return c.core.configs},c.getDelimiter=function(){return c.getConfigs().delimiter},c.getTag=function(e){var t=this.core.tags[e.tag]||null;return"object"==typeof t&&null!==t&&(t=n(n({},t),e)),t},c.addPlugin=function(e){var t,e=new e(this).directives,r=void 0===e?{}:e;for(t in r)this.directive(t,r[t])},c.template=function(e,t,r){return void 0===r&&(r=this.getConfigs()),"string"==typeof t&&(this.core.templates[e]=u.parseTemplate(e,t,c)),this.core.templates[e]},c.resolve=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=!0),"undefined"!=typeof document&&document.querySelectorAll(e).forEach(function(e){e.innerHTML=e.value=c.template(e.id,e.value||e.innerHTML)(t),"hidden"in e&&(e.hidden=!r)})},Object.defineProperty(c,"core",{get:function(){return this._core instanceof c||(this._core=new c,c.addPlugin(a.CoreWax)),this._core},enumerable:!1,configurable:!0}),c)},{"./compiler":1,"./compiler/parser":2,"./debug":4,"./plugins":7}]},{},[9])(9)});